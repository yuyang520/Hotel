<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
        body, html{width: 100%;height: 100%;margin:0;font-family:"微软雅黑";}
    </style>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=
    PFgBspYSe1HEwdM7pd8z0jEA1gG1pYG5"></script>
    <title>城市名定位</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Motel Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template,
        Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design" />
    <script type="applijewelleryion/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
    <link href="/public/css/bootstrap.min.css" rel='stylesheet' type='text/css' />
    <script src="/public/js/jquery.min.js" type="text/javascript"></script>
    <!-- Custom Theme files -->
    <link href="/public/css/style.css" rel='stylesheet' type='text/css' />
    <style>
        .tab-chapter{
            width: 800px;
        }
        .largetext{
            font-size: 20px;
            color: #a1a1a1;
        }
        #allmap{
            width:100%; height:100%;bottom: 0px;
        }
        .mapback{position:fixed; width:30%; height:50%; /*background: #000000;*/
            z-index: 5; right: 5px;top: 0px;}

    </style>
    <script type="text/javascript" src="/public/js/bootstrap.min.js"></script>
    <script>
        function showOrHideMap() {
            if(document.getElementById("allmap").style.display == "none") {
                document.getElementById("allmap").style.display = "block";
            }else {
                document.getElementById("allmap").style.display = "none"
            }
        }
    </script>
    <style type="text/css">
        body{margin: 0 auto;color:#F6F6F6;}
        /*注：t1的宽度是100%跟其他div的宽度不同，如果分辨率高于1100宽度的时候，t1会突出来，这是你原先代码的。*/
        /*position:fixed;这个fixed属性为块状，他跟absolute一样，不会独占一行。
        z-index: 2;属性就是让他显示在其他div的上层*/
        /*.t1{position:fixed; width:100%; height:50px; background: #000000;z-index: 2;}*/
        .t2{width:1100px;height:100px;background:#2266FF;}
        .t3{width:1100px;height:100px;background:#5577FF;}
        .t4{width:1100px;height:100px;background:#3344FF;}
        .t5{width:1100px;height:100px;background:#5577FF;}
        .t6{width:1100px;height:100px;background:#3344FF;}
        /*t01的position: relative;这个是独占一行的属性，在这里相当于占位符的作用。
        height: 50px;这里的50像素高度要等于t1的高度。background:none;
        背景设置成空白或者透明，这里设不设置都没关系，因为他没有加z-index这个属性，
        他默认的属性为0，即显示在t1图层的下面*/
        .t01{position: relative;height: 50px;background:none;border: 10px solid #ffffff}
    </style>
</head>
<body>

<div class="mapback">
    <div style="width: 100%; height: 10%;<!--background: #8aa4af"-->>
        <div style="width: 20%;height: 100%; float: left;text-align: center">
            <a href="/bigmap/"><button style="background-color:#2277cc;">查看大图</button></a>
        </div>
        <div style="width: 20%;height: 100%; float: right;text-align: center">
            <button style="background-color:#2277cc"
                    onclick="showOrHideMap()">收起地图</button>
        </div>
    </div>
    <div  style="width: 100%; top: 10%; height: 90% ;bottom: 0;">
        <div id="allmap" ></div>
    </div>
</div>
<div class="t01" >cdsvddfd</div>
<div class="t2">T2</div>
<div class="t3">T3</div>
<div class="t4">T4</div>
<div class="t5">T5</div>
<div class="t6">T6</div>
<div class="t4">T4</div>
<div class="t5">T5</div>
<div class="t6">T6</div>
<div class="t5">T5</div>
<div class="t6">T6</div>
<div class="t4">T4</div>
<div class="t5">T5</div>
<div class="t6">T6</div>
</body>
</html>
<script type="text/javascript" >
    // 百度地图API功能
    var MapData = null;
    var map = new BMap.Map("allmap");
    var top_left_control = new BMap.ScaleControl({anchor: BMAP_ANCHOR_TOP_LEFT});// 左上角，添加比例尺
    var top_left_navigation = new BMap.NavigationControl();  //左上角，添加默认缩放平移控件
    map.addControl(top_left_control);
    map.addControl(top_left_navigation);

    map.centerAndZoom(new BMap.Point(116.331398,39.897445),11);
    map.enableScrollWheelZoom(true);

    function theLocation(){
        Url="/searchmap/map.json?"
            +"hotelname="+$("#hotelname").val()
            +"&&minPrice="+$("#minPrice").val()
            +"&&city="+$("#city").val()
            +"&&starlevel="+$("#starlevel").val();
        $.ajax({
            url:Url,
            type:"post",
            success:function(data) {
                console.info(data);
                MapData = data;
                map.clearOverlays();
                var opts = {
                    width : 250,     // 信息窗口宽度
                    height: 200,     // 信息窗口高度
                    title : "酒店信息" , // 信息窗口标题
                    enableMessage:true,//设置允许信息窗发送短息
                }
                for( let i = 0 ; i < data.length ; i ++ ) {
                    var new_point = new BMap.Point( data[i].hotelLongitude,
                        data[i].hotelLatitude);
                    var marker = new BMap.Marker(new_point);  // 创建标注
                    var content = "酒店名："+ data[i].hotelChineseName + "<br>地址：" +data[i].hotelAddress
                        +"<br>描述:" +data[i].hotelProfile;
                    map.addOverlay(marker);              // 将标注添加到地图中

                    map.panTo(new_point);
                    marker.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画
                    marker.addEventListener("click",
                        function(e){
                            var p = e.target;
                            var point = new BMap.Point(p.getPosition().lng, p.getPosition().lat);
                            var infoWindow = new BMap.InfoWindow(content, opts);  // 创建信息窗口对象
                            map.openInfoWindow(infoWindow,point); //开启信息窗口

                        });
                }
                var hotelTab = $("#hotelTable");
                var htmlString = "";
                for( let i = 0 ; i < data.length ; i ++ ) {
                    htmlString += "<tr>"
                        +"<td class='tab-chapter' style='display:flex;flex-direction:row;justify-content: center;'>"
                        +"<div style='max-width: 500px;' >"
                        +"<img src='/public/images/mbimage/14.jpg' class='img-responsive' style='width: 100%;' alt=''>"
                        +"<br/>"
                        +"</div>"
                        +"</td>"
                        +"<td class='tab-chapter'>"
                        +"<div style='max-width: 500px;'>"
                        +"<h2 style='color: #92B8B1;'>"+data[i].hotelChineseName+"</h2><br/>"
                        +"<span class='largetext'>地址：</span><span class='largetext' "
                        +">"+data[i].hotelAddress+"</span><br/>"
                        +"<span class='largetext'>星级：</span><span class='largetext'>";
                    for( let j = 0 ; j < data[i].hotelStars ; j ++ ) {
                        htmlString+="<img src='/public/images/star.png' style='height: 20px; width: 20px;'>";
                    }
                    htmlString += "</span><br/>"
                        +"<span class='largetext'>联系方式：</span><span class='largetext' >"+data[i].hotelContact+"</span><br/>"
                        +"<br/><a class='hvr-shutter-in-horizontal'"
                        +"href=\'/welcome/details?hotelId="+data[i].hotelId+"\'>预订</a>"
                        +"</div> </td> </tr>";

                }
                hotelTab.append(htmlString);
            }
        })

    }

</script>